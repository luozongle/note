[TOC]

# 一、性能测试的指标



## 1.并发数

并发数是指在同一个时间点，同时请求服务的客户端数量

比如大家常说的: "我的网站可以承受一万并发."  在通常情况下指的是:如果同时有一万名用户访问网站，所有人都可以正常获取服务。而不会有超时或连接拒绝情况发生。



## 2.吞吐率

吞吐率指的是服务处理请求的效率，计算方式为(总处理请求数/总耗时)

HTTP服务的吞吐率通常以RPS(Requests Per Second 请求数每秒)作为单位。吞吐量越高，代表服务处理效率就越高。换句话说就是网站的性能越高。

注意:吞吐率和并发数是两个完全独立的概念。拿银行柜台举个例子，并发数指的是同时有多少人往银行柜台涌来。吞吐率则指的是银行柜台在一段时间内可以服务多少个人。



但是在性能测试中，二者之间通常会呈现出一种并联关系。当并发数增大时，吞吐率通常也会随之上升。但是在并发数超过某个边界值之后，吞吐率则会下降(用户过多，花在上下文切换的开销急剧增大，又或者内存消耗过多)



## 3.响应时间

响应时间指的是用户从发出请求到接受完响应之间的总耗时，它由网络传输耗时、服务处理耗时等多个部分组成。通常以毫秒(ms)作为单位。



与并发数的关系:一般来说，随着并发数增大，单个用户的响应时间通常会随之增加。这很好理解，餐馆吃饭的人越多，单个顾客等待的时间就越长。



与吞吐率的关系:更高的吞吐率通常意味着更低的响应时间。因为吞吐率是以单位时间内的请求处理能力来计算的。



## 4.平均响应时间与百分位响应时间

平均响应时间指的是所有请求平均花费的时间，如果有100个请求，其中98个耗时为1ms，其他两个为100ms。那么平均响应时间为 (98\*1 + 2\*100) / 100.0 = 2.98ms;



百分位数(Percentile - Wikipedia)是一个统计学名词。以响应时间为例，99%的百分位响应时间，指的是99%的请求响应时间，都处在这个值以下下。



拿上面的响应时间来说，其整体平均响应时间虽然为2.98ms,但是99%的百分位响应时间却是100ms。



相对于平均响应时间来说，百分位响应时间通常更能反应服务的整体效率。现实世界中用的较多的是98%的百分位响应时间，比如GitHub System Status中就有一条98TH PERC.WEB RESPONSE TIME曲线。

>平均响应时间:所有请求的平均响应时间，取得平均值  
>
>95%percentile:统计学术语，如果将一组数据从小到大排序，并计算相应的累计百分位，则某一百分位所对应数据的值就称为这一百分位的百分位数。可表示为:一组n个观测值按数值大小排列。如，处于p%位置的值称为第p百分位数。  
>
>  
>
>例如有100个请求，每个请求的响应时间分别是1-100平均分布
>
>平均响应时间:1-100的平均值，即50.5
>
>95%percentile:按从小到大排序，累计第95百分位，也就是95(即样本里95%的数据都不高于这个值)



















