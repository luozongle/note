[TOC]

# 配置免密



例:如果A机器的test用户需要登录B机器的test1用户

需要在A机器的test用户下输入以下命令，并一直回车

```shell
ssh-keygen
```



然后将A机器的test用户下`.ssh/id_rsa.pub`文件中的内容放到B机器的test1用户下的`.ssh/authorized_keys`文件中。

正常情况下A机器在test用户下就可以使用test1用户免密登录B机器了。

如果不能正常登录，需要查看B用户的`/var/log/secure`日志

如果有如下提示，说明`/root`或者`/root/.ssh/authorized_keys`的权限不对，需要检查权限

```log
Authentication refused: bad ownership or modes for directory /root 
...
Authentication refused: bad ownership or modes for file /root/.ssh/authorized_keys
```



可以使用ssh-copy-id命令方便的将本地`.ssh/id_rsa.pub`拷贝到远程机器上

> 还可以使用-i参数指定拷贝的文件

```shell
ssh-copy-id test1@192.168.0.xx
```

