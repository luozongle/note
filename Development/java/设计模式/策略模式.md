[TOC]



# 策略模式



## 策略模式定义:

​	定义了一系列算法，将每个算法封装到具有公共接口的一系列策略类中，从而使他们可以相互替换 & 让算法可在不影响客户端的情况下发生变化

> 简单来说:准备一组算法 & 将每一个算法封装起来，让外部按需调用 & 使得互换



## 作用

将算法的责任和本身进行解耦，使得:

1.算法可独立于使用外部而变化

2.客户端方便根据外部条件选择不同策略来解决不同问题

> 策略模式仅仅封装算法(包括添加 & 删除),但策略模式并不决定在何时使用何种算法，算法的选择由客户端来决定



## 优缺点:

### 优点:

- 策略类之间可以自由切换
  - 由于策略类都实现同一个接口，所以它们之间可以自由切换
- 易于扩展
  - 增加一个新的策略只需要添加一个具体的策略类即可，基本不需要改变原有的代码，符合"开闭原则"
- 避免使用多重条件选择语句(if else),充分体现面向对象设计思想



## 缺点

- 客户端必须知道所有的策略类，并自行决定使用哪一个策略类。
- 策略模式将造成很多策略类，可以通过使用享元模式在一定程度上减少对象的数量。



```java
public abstract class Strategy {

    public abstract void show();

}

// 为春节准备的促销活动A
class StrategyA extends Strategy {

    @Override
    public void show() {
        System.out.println("为春节准备的促销活动A");
    }
}

// 为中秋节准备的促销活动
class StrategyB extends Strategy {

    @Override
    public void show() {
        System.out.println("为中秋节准备的促销活动B");
    }
}

// 为圣诞节准备的促销活动C
class StrategyC extends Strategy {

    @Override
    public void show() {
        System.out.println("为圣诞节准备的促销活动C");
    }
}

class Context_SalesMan {

    // 持有抽象策略角色的引用
    private Strategy strategy;

    // 生成销售员实例时告诉销售员什么节日(构造方法)
    // 使得销售员根据传入的参数(节日)选择促销活动 (这里使用一个简单的工厂模式)
    public Context_SalesMan(String festival) {
        switch (festival) {
            // 春节就使用春节促销活动
            case "A":
                strategy = new StrategyA();
                break;
            // 中秋节就使用中秋节促销活动
            case "B":
                strategy = new StrategyB();
                break;
            case "C":
                strategy = new StrategyC();
                break;
        }
    }

    // 向客户展示促销活动
    public void SalesManShow() {
        strategy.show();
    }
}

class StrategyPattern {

    public static void main(String[] args) {

        Context_SalesMan salesMan;

        System.out.println("对于春节: ");
        salesMan = new Context_SalesMan("A");
        salesMan.SalesManShow();

        System.out.println("对于中秋节: ");
        salesMan = new Context_SalesMan("B");
        salesMan.SalesManShow();

        System.out.println("对于圣诞节: ");
        salesMan = new Context_SalesMan("C");
        salesMan.SalesManShow();


    }
}
```



